<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="assets/icon/logo.png"/>
    <!--框架css-->
    <link rel="stylesheet" href="lib/iview/iview.css">
    <link rel="stylesheet" href="lib/bootstrap/bootstrap.css">
    <!--css-->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/search.css">
    <!--框架js-->
    <script src="lib/vue/vuePlus.js"></script>
    <script src="lib/iview/iview.min.js"></script>
    <script src="lib/jquery/jquery.min.js"></script>
    <script src="lib/bootstrap/bootstrap.js"></script>
    <!--js-->
    <script src="js/common.js"></script>
    <script src="js/search.js"></script>
    <!--模块-->
    <script src="module/topUserInfo/topUserInfo.js"></script>
    <script src="module/headerSearch/headerSearch.js"></script>
    <script src="module/productUnit/productUnit.js"></script>
    <script src="module/category/category.js"></script>
    <title>亚马逊(搜索)</title>
</head>
<body style="overflow: auto">
<div id="search">
    <top-user-info></top-user-info>
    <div style="width: 100%;margin-top: 60px">
        <header-search></header-search>
    </div>
    <div class="my_container">
        <div class="category_nav_bread_crumb_wrap">
            <breadcrumb separator=">" v-if="params.pcid">
                <breadcrumb-item to="index.html">所有分类</breadcrumb-item>
                <breadcrumb-item :to="'search.html?pcid='+params.pcid+'&pcname='+params.pcname" >{{params.pcname}}</breadcrumb-item>
                <breadcrumb-item to="#" v-if="params.cpcid">{{params.cpcname}}</breadcrumb-item>
            </breadcrumb>
        </div>
        <ul class="product-list">
            <li v-for="item in products"><product-unit :product="item"></product-unit></li>
        </ul>
        <div style="text-align: center;padding:40px 0 60px 0;">
            <page @on-change="lookNextPageProducts":total="page.total" :page-size="page.size" :current.sync="page.current" show-elevator></page>
        </div>
    </div>
</div>
<script>
    var app=new Vue({
        el:'#search',
        data:{
            i:0,
            products:[
                {id:'1',name:'one'}, {id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'},{id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'}, {id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'}, {id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'}, {id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'},{id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'}, {id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'}, {id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'}, {id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
                {id:'1',name:'one'},{id:'2',name:'two'}, {id:'3',name:'three'},
                {id:'4',name:'four'}, {id:'5',name:'five'}, {id:'6',name:'six'},
            ],
            page:{
                total:6000,
                size:60,
                current:2
            },
            params:{},
            interfaces:{
                getProductsByPage:'core/product/getProductsByPage'
            }
        },
        created:function () {
            window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, (m,key,value) =>{this.params[key] = decodeURI(value);});
            let params={};
            params.page.size=this.page.size;
            params.page.current=this.page.current;
            params.pCate=this.params;
            callApi(this.interfaces.getProductsByPage,params,(data)=> {
                this.products=data;
            })
        },
        methods:{
            lookNextPageProducts:function (current) {
                console.log(current)
            }
        }
    });
</script>
</body>
</html>